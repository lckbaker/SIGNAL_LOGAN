<html>
  <meta charset="utf-8">
  <head>
    <style>
    path.arc {
              cursor: move;
              fill: #fff;
            }

            .node {
              font-size: 10px;
              !font-weight: normal;
            }

            .node:hover {
              !fill: #1f77b4;
              cursor: crosshair;
            }

            .link {
              fill: none;
              !stroke: #1f77b4;
              stroke-opacity: .1;
              pointer-events: none;
            }

            .link.source, .link.target {
              !stroke-opacity: 1;
              stroke-width: 2px;
            }

            .node.target {
              !fill: #d62728 !important;
              !font-weight: bold;
            }

            .link.source {
              !stroke: #d62728;
            }

            .node.source {
              !fill: #2ca02c;
              !font-weight: bold;
            }

            .link.target {
              !stroke: #2ca02c;
            }

            .pathButton {
              cursor: pointer;
            }

            .resetButton {
              cursor: pointer;
            }

            .revert {
              cursor: pointer;
            }

            input{
              position: relative; bottom: 450px; left: 700px;
            }

            input.tension{
              position: absolute;
              width: 100px;
            }
            input.textSize{
              position: absolute; bottom: 375px;
              width: 100px;
            }
            input.nodeSize{
              position: absolute; bottom: 300px;
              width: 100px;
            }
            input.wTextSize{
              position: absolute; bottom: 225px;
              width: 100px;
            }
    </style>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://mbostock.github.io/d3/talk/20111116/d3/d3.js"></script>
    <script src="https://mbostock.github.io/d3/talk/20111116/d3/d3.layout.js"></script>
  </head>
  <body>
    <script>
      // input output from R console from variable json_1 defined in Ranking_source.R
      var json_data = [{"name":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6"],"imports":["Novel.NOP56","Ribosome.RPL18","Ribosome.RPL17","Novel.NOP58","Ribosome.RPL32","Ribosome.RPL7","RNA transport.EEF1A1","Ribosome.RPS20","Ribosome.RPL6","Ribosome.RPS15A","Ribosome.RPL9","Ribosome.RPS18","Ribosome.RPS8","Novel.FBL","Ribosome.RPL18A","Ribosome.RPS23","Ribosome.RPL4","Ribosome.RPLP0","Ribosome.RPL10","Ribosome.RPL27A","RNA transport.EIF3I","Ribosome.RPS10","Ribosome.RPS27","Ribosome.RPL7A","Ribosome.RPS4X","Novel.ETF1","Ribosome.RPL10A","RNA transport.EIF1AX"],"weights":[476,774,774,474,774,774,498,774,774,774,774,774,774,476,774,774,774,774,774,774,800,774,953,774,953,800,774,800],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium"],"order":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"Color":["#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702","#ce6702"]},{"name":["EGFR tyrosine kinase inhibitor resistance.MTOR"],"imports":["Novel.RRAGB"],"weights":[774],"datasource":["experimental"],"Confidence":["Medium"],"order":[2],"Color":["saddlebrown"]},{"name":["RNA transport & EGFR tyrosine kinase inhibitor resistance.EIF4E","RNA transport & EGFR tyrosine kinase inhibitor resistance.EIF4E"],"imports":["RNA transport.EIF4EBP2","RNA transport.EIF3H"],"weights":[595,774],"datasource":["experimental","experimental"],"Confidence":["Medium","Medium"],"order":[3,3],"Color":["#6b5b3e","#6b5b3e"]},{"name":["Novel.ABCC2"],"imports":["RNA transport.EEF1A1"],"weights":[464],"datasource":["experimental"],"Confidence":["Medium"],"order":[4],"Color":["green"]},{"name":["Novel.ABTB1"],"imports":["RNA transport.EEF1A1"],"weights":[439],"datasource":["experimental"],"Confidence":["Medium"],"order":[5],"Color":["green"]},{"name":["Novel.ACTA2","Novel.ACTA2","Novel.ACTA2","Novel.ACTA2","Novel.ACTA2","Novel.ACTA2","Novel.ACTA2"],"imports":["Ribosome.RPS15A","Ribosome.RPS23","Ribosome.RPL7A","Ribosome.RPS4X","Ribosome.RPL10A","Ribosome.RPL18","Ribosome.RPL17"],"weights":[454,454,451,456,444,454,442],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium","Medium","Medium"],"order":[6,6,6,6,6,6,6],"Color":["green","green","green","green","green","green","green"]},{"name":["Novel.AHCTF1","Novel.AHCTF1","Novel.AHCTF1"],"imports":["RNA transport.NUP160","RNA transport.NUP107","RNA transport.NUP133"],"weights":[605,774,774],"datasource":["experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium"],"order":[7,7,7],"Color":["green","green","green"]},{"name":["Novel.ALDH1B1"],"imports":["Ribosome.RPL6"],"weights":[417],"datasource":["experimental"],"Confidence":["Medium"],"order":[8],"Color":["green"]},{"name":["Novel.ARF1"],"imports":["RNA transport.EIF2B1"],"weights":[417],"datasource":["experimental"],"Confidence":["High"],"order":[9],"Color":["green"]},{"name":["Novel.ARPC5"],"imports":["RNA transport.EIF3H"],"weights":[488],"datasource":["experimental"],"Confidence":["Medium"],"order":[10],"Color":["green"]},{"name":["Novel.ATP6V0A1"],"imports":["Ribosome.RPS18"],"weights":[595],"datasource":["experimental"],"Confidence":["High"],"order":[11],"Color":["green"]},{"name":["Novel.ATP6V1H"],"imports":["Ribosome.MRPL1"],"weights":[417],"datasource":["experimental"],"Confidence":["Medium"],"order":[12],"Color":["green"]},{"name":["Novel.CDA"],"imports":["RNA transport.XPO1"],"weights":[417],"datasource":["experimental"],"Confidence":["Medium"],"order":[13],"Color":["green"]},{"name":["Novel.COG4"],"imports":["Ribosome.RPS20"],"weights":[503],"datasource":["experimental"],"Confidence":["High"],"order":[14],"Color":["green"]},{"name":["Novel.CSNK2A2"],"imports":["RNA transport.EIF3H"],"weights":[774],"datasource":["experimental"],"Confidence":["Medium"],"order":[15],"Color":["green"]},{"name":["Novel.DCAF1"],"imports":["Ribosome.RPS8"],"weights":[503],"datasource":["experimental"],"Confidence":["High"],"order":[16],"Color":["green"]},{"name":["Novel.DDX3X","Novel.DDX3X"],"imports":["RNA transport.NUP133","Ribosome.RPS15A"],"weights":[503,483],"datasource":["experimental","experimental"],"Confidence":["High","High"],"order":[17,17],"Color":["green","green"]},{"name":["Novel.DIMT1"],"imports":["Ribosome.RPS15A"],"weights":[417],"datasource":["experimental"],"Confidence":["High"],"order":[18],"Color":["green"]},{"name":["Novel.ERC2"],"imports":["RNA transport.EIF1AX"],"weights":[800],"datasource":["experimental"],"Confidence":["Medium"],"order":[19],"Color":["green"]},{"name":["Novel.ETF1"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6"],"weights":[800],"datasource":["experimental"],"Confidence":["High"],"order":[20],"Color":["green"]},{"name":["Novel.FBL","Novel.FBL","Novel.FBL","Novel.FBL","Novel.FBL","Novel.FBL","Novel.FBL","Novel.FBL","Novel.FBL","Novel.FBL","Novel.FBL","Novel.FBL","Novel.FBL"],"imports":["Ribosome.RPL18A","Ribosome.RPL4","Ribosome.RPS4X","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Ribosome.RPL18","Ribosome.RPL17","Ribosome.RSL24D1","Ribosome.RPL7","RNA transport.EEF1A1","Ribosome.RPL6","Ribosome.RPS15A","Ribosome.RPL9","Ribosome.RPS8"],"weights":[774,596,476,476,474,597,417,595,474,584,471,417,471],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium"],"order":[21,21,21,21,21,21,21,21,21,21,21,21,21],"Color":["green","green","green","green","green","green","green","green","green","green","green","green","green"]},{"name":["Novel.FLII"],"imports":["RNA transport.EIF1AX"],"weights":[503],"datasource":["experimental"],"Confidence":["High"],"order":[22],"Color":["green"]},{"name":["Novel.FLNC"],"imports":["RNA transport.NUP133"],"weights":[774],"datasource":["experimental"],"Confidence":["Medium"],"order":[23],"Color":["green"]},{"name":["Novel.GLE1","Novel.GLE1"],"imports":["RNA transport.NUP107","RNA transport.NUP153"],"weights":[651,734],"datasource":["experimental","experimental"],"Confidence":["Medium","Medium"],"order":[24,24],"Color":["green","green"]},{"name":["Novel.GORASP2"],"imports":["RNA transport.EEF1A1"],"weights":[503],"datasource":["experimental"],"Confidence":["Medium"],"order":[25],"Color":["green"]},{"name":["Novel.HEATR5A"],"imports":["RNA transport.NUP62"],"weights":[503],"datasource":["experimental"],"Confidence":["Medium"],"order":[26],"Color":["green"]},{"name":["Novel.HNRNPF"],"imports":["RNA transport.RANBP2"],"weights":[707],"datasource":["experimental"],"Confidence":["High"],"order":[27],"Color":["green"]},{"name":["Novel.HNRNPU","Novel.HNRNPU","Novel.HNRNPU"],"imports":["Ribosome.RPL18A","Ribosome.RPLP0","Ribosome.RPL18"],"weights":[503,493,417],"datasource":["experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium"],"order":[28,28,28],"Color":["green","green","green"]},{"name":["Novel.HUWE1"],"imports":["RNA transport.RANGAP1"],"weights":[774],"datasource":["experimental"],"Confidence":["High"],"order":[29],"Color":["green"]},{"name":["Novel.ILF3","Novel.ILF3"],"imports":["Ribosome.MRPL1","Ribosome.RPL32"],"weights":[454,496],"datasource":["experimental","experimental"],"Confidence":["Medium","Medium"],"order":[30,30],"Color":["green","green"]},{"name":["Novel.KBTBD7"],"imports":["RNA transport.NUP155"],"weights":[620],"datasource":["experimental"],"Confidence":["High"],"order":[31],"Color":["green"]},{"name":["Novel.LSM2"],"imports":["RNA transport.CLNS1A"],"weights":[604],"datasource":["experimental"],"Confidence":["Medium"],"order":[32],"Color":["green"]},{"name":["Novel.LSM3"],"imports":["RNA transport.CLNS1A"],"weights":[627],"datasource":["experimental"],"Confidence":["High"],"order":[33],"Color":["green"]},{"name":["Novel.LYPLA2"],"imports":["RNA transport.EIF2B1"],"weights":[417],"datasource":["experimental"],"Confidence":["Medium"],"order":[34],"Color":["green"]},{"name":["Novel.MAP4"],"imports":["Ribosome.RPS20"],"weights":[503],"datasource":["experimental"],"Confidence":["High"],"order":[35],"Color":["green"]},{"name":["Novel.MDH2"],"imports":["RNA transport.CLNS1A"],"weights":[503],"datasource":["experimental"],"Confidence":["Medium"],"order":[36],"Color":["green"]},{"name":["Novel.MKRN2"],"imports":["RNA transport.PAIP1"],"weights":[774],"datasource":["experimental"],"Confidence":["High"],"order":[37],"Color":["green"]},{"name":["Novel.MRPL50","Novel.MRPL50"],"imports":["Ribosome.MRPL19","Ribosome.MRPL1"],"weights":[953,503],"datasource":["experimental","experimental"],"Confidence":["Medium","Medium"],"order":[38,38],"Color":["green","green"]},{"name":["Novel.MYL1"],"imports":["RNA transport.NUP107"],"weights":[503],"datasource":["experimental"],"Confidence":["Medium"],"order":[39],"Color":["green"]},{"name":["Novel.NOP56","Novel.NOP56","Novel.NOP56","Novel.NOP56","Novel.NOP56","Novel.NOP56","Novel.NOP56","Novel.NOP56","Novel.NOP56","Novel.NOP56"],"imports":["Ribosome.RPL18","Ribosome.RPL7","RNA transport.EEF1A1","Ribosome.RPL6","Ribosome.RPS15A","Ribosome.RPS8","Ribosome.RPL18A","Ribosome.RPL4","Ribosome.RPS4X","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6"],"weights":[474,471,474,584,471,471,774,474,476,476],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium"],"order":[40,40,40,40,40,40,40,40,40,40],"Color":["green","green","green","green","green","green","green","green","green","green"]},{"name":["Novel.NOP58","Novel.NOP58","Novel.NOP58","Novel.NOP58","Novel.NOP58","Novel.NOP58","Novel.NOP58","Novel.NOP58"],"imports":["Ribosome.RPL7","Ribosome.RPL6","Ribosome.RPS15A","Ribosome.RPS8","Ribosome.RPL18A","Ribosome.RPL4","Ribosome.RPS4X","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6"],"weights":[614,476,469,469,774,469,471,474],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium"],"order":[41,41,41,41,41,41,41,41],"Color":["green","green","green","green","green","green","green","green"]},{"name":["Novel.NUMA1","Novel.NUMA1"],"imports":["RNA transport.EIF3I","RNA transport.EIF3H"],"weights":[417,774],"datasource":["experimental","experimental"],"Confidence":["Medium","Medium"],"order":[42,42],"Color":["green","green"]},{"name":["Novel.PDIA6"],"imports":["RNA transport.CLNS1A"],"weights":[503],"datasource":["experimental"],"Confidence":["High"],"order":[43],"Color":["green"]},{"name":["Novel.PGRMC1"],"imports":["Ribosome.RPS20"],"weights":[503],"datasource":["experimental"],"Confidence":["Medium"],"order":[44],"Color":["green"]},{"name":["Novel.PPIB"],"imports":["RNA transport.RANGAP1"],"weights":[503],"datasource":["experimental"],"Confidence":["High"],"order":[45],"Color":["green"]},{"name":["Novel.PRPF3"],"imports":["Ribosome.RPS10"],"weights":[429],"datasource":["experimental"],"Confidence":["Medium"],"order":[46],"Color":["green"]},{"name":["Novel.RAB2A"],"imports":["RNA transport.EEF1A1"],"weights":[417],"datasource":["experimental"],"Confidence":["High"],"order":[47],"Color":["green"]},{"name":["Novel.RANBP1"],"imports":["RNA transport.XPO1"],"weights":[878],"datasource":["experimental"],"Confidence":["High"],"order":[48],"Color":["green"]},{"name":["Novel.RCC1","Novel.RCC1","Novel.RCC1","Novel.RCC1"],"imports":["RNA transport.RANBP2","RNA transport.NUP107","RNA transport.XPO1","RNA transport.NUP153"],"weights":[774,636,417,704],"datasource":["experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium"],"order":[49,49,49,49],"Color":["green","green","green","green"]},{"name":["Novel.RRAGB"],"imports":["EGFR tyrosine kinase inhibitor resistance.MTOR"],"weights":[774],"datasource":["experimental"],"Confidence":["High"],"order":[50],"Color":["green"]},{"name":["Novel.RSL1D1"],"imports":["Ribosome.RPL4"],"weights":[442],"datasource":["experimental"],"Confidence":["High"],"order":[51],"Color":["green"]},{"name":["Novel.S100A6"],"imports":["RNA transport.CLNS1A"],"weights":[503],"datasource":["experimental"],"Confidence":["Medium"],"order":[52],"Color":["green"]},{"name":["Novel.SEC61A1"],"imports":["Ribosome.RPL17"],"weights":[417],"datasource":["experimental"],"Confidence":["Medium"],"order":[53],"Color":["green"]},{"name":["Novel.SF3A2"],"imports":["RNA transport.NCBP2"],"weights":[774],"datasource":["experimental"],"Confidence":["Medium"],"order":[54],"Color":["green"]},{"name":["Novel.SF3B3"],"imports":["Ribosome.RPL18A"],"weights":[417],"datasource":["experimental"],"Confidence":["Medium"],"order":[55],"Color":["green"]},{"name":["Novel.SNRPB"],"imports":["RNA transport.CLNS1A"],"weights":[606],"datasource":["experimental"],"Confidence":["Medium"],"order":[56],"Color":["green"]},{"name":["Novel.SPEN","Novel.SPEN"],"imports":["RNA transport.NUP54","RNA transport.NUP107"],"weights":[503,800],"datasource":["experimental","experimental"],"Confidence":["Medium","Medium"],"order":[57,57],"Color":["green","green"]},{"name":["Novel.SSB"],"imports":["RNA transport.EEF1A1"],"weights":[417],"datasource":["experimental"],"Confidence":["High"],"order":[58],"Color":["green"]},{"name":["Novel.STX5"],"imports":["RNA transport.NUP160"],"weights":[605],"datasource":["experimental"],"Confidence":["High"],"order":[59],"Color":["green"]},{"name":["Novel.TMED2","Novel.TMED2"],"imports":["RNA transport.EIF3I","Ribosome.RPS10"],"weights":[417,417],"datasource":["experimental","experimental"],"Confidence":["High","High"],"order":[60,60],"Color":["green","green"]},{"name":["Novel.TRIM55"],"imports":["RNA transport.RANBP2"],"weights":[503],"datasource":["experimental"],"Confidence":["High"],"order":[61],"Color":["green"]},{"name":["Novel.UBXN1"],"imports":["RNA transport.CLNS1A"],"weights":[432],"datasource":["experimental"],"Confidence":["Medium"],"order":[62],"Color":["green"]},{"name":["Novel.USP7"],"imports":["RNA transport.THOC2"],"weights":[417],"datasource":["experimental"],"Confidence":["Medium"],"order":[63],"Color":["green"]},{"name":["Novel.VPS53"],"imports":["RNA transport.THOC2"],"weights":[774],"datasource":["experimental"],"Confidence":["High"],"order":[64],"Color":["green"]},{"name":["Novel.WWOX"],"imports":["RNA transport.NUP133"],"weights":[774],"datasource":["experimental"],"Confidence":["Medium"],"order":[65],"Color":["green"]},{"name":["RNA transport.CLNS1A","RNA transport.CLNS1A","RNA transport.CLNS1A","RNA transport.CLNS1A","RNA transport.CLNS1A","RNA transport.CLNS1A","RNA transport.CLNS1A"],"imports":["Novel.LSM3","Novel.LSM2","Novel.SNRPB","Novel.UBXN1","Novel.MDH2","Novel.PDIA6","Novel.S100A6"],"weights":[627,604,606,432,503,503,503],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["High","High","High","High","High","High","High"],"order":[66,66,66,66,66,66,66],"Color":["blue","blue","blue","blue","blue","blue","blue"]},{"name":["RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1","RNA transport.EEF1A1"],"imports":["Ribosome.RPL6","Ribosome.RPS15A","Ribosome.RPL9","Ribosome.RPS8","Novel.FBL","Ribosome.RPL18A","Ribosome.RPS23","Ribosome.RPL4","Ribosome.RPLP0","Ribosome.RPL7A","Ribosome.RPS4X","Ribosome.RPL10A","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.NOP56","Ribosome.RPL18","Ribosome.RPL17","Novel.ABCC2","Novel.RAB2A","Novel.SSB","Novel.GORASP2","Novel.ABTB1","Ribosome.RPL7"],"weights":[501,496,488,496,474,488,496,496,417,491,498,486,498,474,496,483,464,417,417,503,439,417],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium"],"order":[67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67],"Color":["blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue"]},{"name":["RNA transport.EIF1AX","RNA transport.EIF1AX","RNA transport.EIF1AX","RNA transport.EIF1AX"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.FLII","Novel.ERC2","Ribosome.RPS27"],"weights":[800,503,800,800],"datasource":["experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium"],"order":[68,68,68,68],"Color":["blue","blue","blue","blue"]},{"name":["RNA transport.EIF2B1","RNA transport.EIF2B1"],"imports":["Novel.LYPLA2","Novel.ARF1"],"weights":[417,417],"datasource":["experimental","experimental"],"Confidence":["Medium","Medium"],"order":[69,69],"Color":["blue","blue"]},{"name":["RNA transport.EIF3H","RNA transport.EIF3H","RNA transport.EIF3H","RNA transport.EIF3H"],"imports":["RNA transport & EGFR tyrosine kinase inhibitor resistance.EIF4E","Novel.CSNK2A2","Novel.NUMA1","Novel.ARPC5"],"weights":[774,774,774,488],"datasource":["experimental","experimental","experimental","experimental"],"Confidence":["High","High","High","High"],"order":[70,70,70,70],"Color":["blue","blue","blue","blue"]},{"name":["RNA transport.EIF3I","RNA transport.EIF3I","RNA transport.EIF3I","RNA transport.EIF3I"],"imports":["Ribosome.RPS27","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.NUMA1","Novel.TMED2"],"weights":[800,800,417,417],"datasource":["experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium"],"order":[71,71,71,71],"Color":["blue","blue","blue","blue"]},{"name":["RNA transport.EIF4EBP2"],"imports":["RNA transport & EGFR tyrosine kinase inhibitor resistance.EIF4E"],"weights":[595],"datasource":["experimental"],"Confidence":["Medium"],"order":[72],"Color":["blue"]},{"name":["RNA transport.NCBP2"],"imports":["Novel.SF3A2"],"weights":[774],"datasource":["experimental"],"Confidence":["Medium"],"order":[73],"Color":["blue"]},{"name":["RNA transport.NUP107","RNA transport.NUP107","RNA transport.NUP107","RNA transport.NUP107","RNA transport.NUP107"],"imports":["Novel.AHCTF1","Novel.SPEN","Novel.MYL1","Novel.GLE1","Novel.RCC1"],"weights":[774,800,503,651,636],"datasource":["experimental","experimental","experimental","experimental","experimental"],"Confidence":["High","High","High","High","High"],"order":[74,74,74,74,74],"Color":["blue","blue","blue","blue","blue"]},{"name":["RNA transport.NUP133","RNA transport.NUP133","RNA transport.NUP133","RNA transport.NUP133"],"imports":["Novel.AHCTF1","Novel.FLNC","Novel.WWOX","Novel.DDX3X"],"weights":[774,774,774,503],"datasource":["experimental","experimental","experimental","experimental"],"Confidence":["High","High","High","High"],"order":[75,75,75,75],"Color":["blue","blue","blue","blue"]},{"name":["RNA transport.NUP153","RNA transport.NUP153"],"imports":["Novel.GLE1","Novel.RCC1"],"weights":[734,704],"datasource":["experimental","experimental"],"Confidence":["High","High"],"order":[76,76],"Color":["blue","blue"]},{"name":["RNA transport.NUP155"],"imports":["Novel.KBTBD7"],"weights":[620],"datasource":["experimental"],"Confidence":["High"],"order":[77],"Color":["blue"]},{"name":["RNA transport.NUP160","RNA transport.NUP160"],"imports":["Novel.STX5","Novel.AHCTF1"],"weights":[605,605],"datasource":["experimental","experimental"],"Confidence":["High","High"],"order":[78,78],"Color":["blue","blue"]},{"name":["RNA transport.NUP54"],"imports":["Novel.SPEN"],"weights":[503],"datasource":["experimental"],"Confidence":["Medium"],"order":[79],"Color":["blue"]},{"name":["RNA transport.NUP62"],"imports":["Novel.HEATR5A"],"weights":[503],"datasource":["experimental"],"Confidence":["Medium"],"order":[80],"Color":["blue"]},{"name":["RNA transport.PAIP1"],"imports":["Novel.MKRN2"],"weights":[774],"datasource":["experimental"],"Confidence":["Medium"],"order":[81],"Color":["blue"]},{"name":["RNA transport.RANBP2","RNA transport.RANBP2","RNA transport.RANBP2","RNA transport.RANBP2"],"imports":["Ribosome.RPLP0","Novel.TRIM55","Novel.HNRNPF","Novel.RCC1"],"weights":[417,503,707,774],"datasource":["experimental","experimental","experimental","experimental"],"Confidence":["High","High","High","High"],"order":[82,82,82,82],"Color":["blue","blue","blue","blue"]},{"name":["RNA transport.RANGAP1","RNA transport.RANGAP1"],"imports":["Novel.PPIB","Novel.HUWE1"],"weights":[503,774],"datasource":["experimental","experimental"],"Confidence":["Medium","Medium"],"order":[83,83],"Color":["blue","blue"]},{"name":["RNA transport.THOC2","RNA transport.THOC2"],"imports":["Novel.VPS53","Novel.USP7"],"weights":[774,417],"datasource":["experimental","experimental"],"Confidence":["High","High"],"order":[84,84],"Color":["blue","blue"]},{"name":["RNA transport.XPO1","RNA transport.XPO1","RNA transport.XPO1"],"imports":["Novel.RANBP1","Novel.RCC1","Novel.CDA"],"weights":[878,417,417],"datasource":["experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium"],"order":[85,85,85],"Color":["blue","blue","blue"]},{"name":["Ribosome.MRPL1","Ribosome.MRPL1","Ribosome.MRPL1"],"imports":["Novel.MRPL50","Novel.ILF3","Novel.ATP6V1H"],"weights":[503,454,417],"datasource":["experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium"],"order":[86,86,86],"Color":["red","red","red"]},{"name":["Ribosome.MRPL19"],"imports":["Novel.MRPL50"],"weights":[953],"datasource":["experimental"],"Confidence":["Medium"],"order":[87],"Color":["red"]},{"name":["Ribosome.RPL10"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6"],"weights":[774],"datasource":["experimental"],"Confidence":["Medium"],"order":[88],"Color":["red"]},{"name":["Ribosome.RPL10A","Ribosome.RPL10A","Ribosome.RPL10A"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.ACTA2","RNA transport.EEF1A1"],"weights":[774,444,486],"datasource":["experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium"],"order":[89,89,89],"Color":["red","red","red"]},{"name":["Ribosome.RPL17","Ribosome.RPL17","Ribosome.RPL17","Ribosome.RPL17","Ribosome.RPL17"],"imports":["Novel.ACTA2","RNA transport.EEF1A1","Novel.FBL","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.SEC61A1"],"weights":[442,483,597,774,417],"datasource":["experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium"],"order":[90,90,90,90,90],"Color":["red","red","red","red","red"]},{"name":["Ribosome.RPL18","Ribosome.RPL18","Ribosome.RPL18","Ribosome.RPL18","Ribosome.RPL18","Ribosome.RPL18"],"imports":["Novel.ACTA2","RNA transport.EEF1A1","Novel.HNRNPU","Novel.FBL","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.NOP56"],"weights":[454,496,417,474,774,474],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium","Medium"],"order":[91,91,91,91,91,91],"Color":["red","red","red","red","red","red"]},{"name":["Ribosome.RPL18A","Ribosome.RPL18A","Ribosome.RPL18A","Ribosome.RPL18A","Ribosome.RPL18A","Ribosome.RPL18A","Ribosome.RPL18A"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.NOP56","Novel.NOP58","Novel.SF3B3","RNA transport.EEF1A1","Novel.HNRNPU","Novel.FBL"],"weights":[774,774,774,417,488,503,774],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium","Medium","Medium"],"order":[92,92,92,92,92,92,92],"Color":["red","red","red","red","red","red","red"]},{"name":["Ribosome.RPL27A"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6"],"weights":[774],"datasource":["experimental"],"Confidence":["Medium"],"order":[93],"Color":["red"]},{"name":["Ribosome.RPL32","Ribosome.RPL32"],"imports":["Novel.ILF3","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6"],"weights":[496,774],"datasource":["experimental","experimental"],"Confidence":["Medium","Medium"],"order":[94,94],"Color":["red","red"]},{"name":["Ribosome.RPL4","Ribosome.RPL4","Ribosome.RPL4","Ribosome.RPL4","Ribosome.RPL4","Ribosome.RPL4"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.NOP56","Novel.NOP58","Novel.RSL1D1","RNA transport.EEF1A1","Novel.FBL"],"weights":[774,474,469,442,496,596],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium","Medium"],"order":[95,95,95,95,95,95],"Color":["red","red","red","red","red","red"]},{"name":["Ribosome.RPL6","Ribosome.RPL6","Ribosome.RPL6","Ribosome.RPL6","Ribosome.RPL6","Ribosome.RPL6"],"imports":["Novel.FBL","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.NOP56","Novel.NOP58","Novel.ALDH1B1","RNA transport.EEF1A1"],"weights":[584,774,584,476,417,501],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium","Medium"],"order":[96,96,96,96,96,96],"Color":["red","red","red","red","red","red"]},{"name":["Ribosome.RPL7","Ribosome.RPL7","Ribosome.RPL7","Ribosome.RPL7","Ribosome.RPL7"],"imports":["RNA transport.EEF1A1","Novel.FBL","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.NOP56","Novel.NOP58"],"weights":[417,595,774,471,614],"datasource":["experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium"],"order":[97,97,97,97,97],"Color":["red","red","red","red","red"]},{"name":["Ribosome.RPL7A","Ribosome.RPL7A","Ribosome.RPL7A"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.ACTA2","RNA transport.EEF1A1"],"weights":[774,451,491],"datasource":["experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium"],"order":[98,98,98],"Color":["red","red","red"]},{"name":["Ribosome.RPL9","Ribosome.RPL9","Ribosome.RPL9"],"imports":["Novel.FBL","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","RNA transport.EEF1A1"],"weights":[417,774,488],"datasource":["experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium"],"order":[99,99,99],"Color":["red","red","red"]},{"name":["Ribosome.RPLP0","Ribosome.RPLP0","Ribosome.RPLP0","Ribosome.RPLP0"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","RNA transport.EEF1A1","RNA transport.RANBP2","Novel.HNRNPU"],"weights":[774,417,417,493],"datasource":["experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium"],"order":[100,100,100,100],"Color":["red","red","red","red"]},{"name":["Ribosome.RPS10","Ribosome.RPS10","Ribosome.RPS10"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.TMED2","Novel.PRPF3"],"weights":[774,417,429],"datasource":["experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium"],"order":[101,101,101],"Color":["red","red","red"]},{"name":["Ribosome.RPS15A","Ribosome.RPS15A","Ribosome.RPS15A","Ribosome.RPS15A","Ribosome.RPS15A","Ribosome.RPS15A","Ribosome.RPS15A","Ribosome.RPS15A"],"imports":["Novel.FBL","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.NOP56","Novel.NOP58","Novel.DDX3X","Novel.ACTA2","Novel.DIMT1","RNA transport.EEF1A1"],"weights":[471,774,471,469,483,454,417,496],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium","Medium","Medium","Medium"],"order":[102,102,102,102,102,102,102,102],"Color":["red","red","red","red","red","red","red","red"]},{"name":["Ribosome.RPS18","Ribosome.RPS18"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.ATP6V0A1"],"weights":[774,595],"datasource":["experimental","experimental"],"Confidence":["Medium","Medium"],"order":[103,103],"Color":["red","red"]},{"name":["Ribosome.RPS20","Ribosome.RPS20","Ribosome.RPS20","Ribosome.RPS20"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.PGRMC1","Novel.COG4","Novel.MAP4"],"weights":[774,503,503,503],"datasource":["experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium"],"order":[104,104,104,104],"Color":["red","red","red","red"]},{"name":["Ribosome.RPS23","Ribosome.RPS23","Ribosome.RPS23"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.ACTA2","RNA transport.EEF1A1"],"weights":[774,454,496],"datasource":["experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium"],"order":[105,105,105],"Color":["red","red","red"]},{"name":["Ribosome.RPS27","Ribosome.RPS27","Ribosome.RPS27"],"imports":["RNA transport.EIF1AX","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","RNA transport.EIF3I"],"weights":[800,953,800],"datasource":["experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium"],"order":[106,106,106],"Color":["red","red","red"]},{"name":["Ribosome.RPS4X","Ribosome.RPS4X","Ribosome.RPS4X","Ribosome.RPS4X","Ribosome.RPS4X","Ribosome.RPS4X"],"imports":["Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.NOP56","Novel.NOP58","Novel.ACTA2","RNA transport.EEF1A1","Novel.FBL"],"weights":[953,476,471,456,498,476],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium","Medium"],"order":[107,107,107,107,107,107],"Color":["red","red","red","red","red","red"]},{"name":["Ribosome.RPS8","Ribosome.RPS8","Ribosome.RPS8","Ribosome.RPS8","Ribosome.RPS8","Ribosome.RPS8"],"imports":["Novel.FBL","Ribosome & EGFR tyrosine kinase inhibitor resistance.RPS6","Novel.NOP56","Novel.NOP58","Novel.DCAF1","RNA transport.EEF1A1"],"weights":[471,774,471,469,503,496],"datasource":["experimental","experimental","experimental","experimental","experimental","experimental"],"Confidence":["Medium","Medium","Medium","Medium","Medium","Medium"],"order":[108,108,108,108,108,108],"Color":["red","red","red","red","red","red"]},{"name":["Ribosome.RSL24D1"],"imports":["Novel.FBL"],"weights":[417],"datasource":["experimental"],"Confidence":["Medium"],"order":[109],"Color":["red"]}]
      
      var df = []

      json_data.forEach(function(d){
        d = {name: d.name[0], imports: d.imports, weights: d.weights,
              datasource: d.datasource, Confidence: d.Confidence[0], order: d.order[0], color: d.Color[0]};
        df.push(d)
      });

      console.log(df);

      var w = 800,
        h = w,
        rx = 380,
        ry = 365,
        m0,
        rotate = 0,
        headSpace = 100,
        rectW = w-640,
        rectH = w-650;

      var clickedData = [],
          splines = [],
          childrenData = {},
          childrenArray = [];

      //var colorMap = ['#ff0000', '#ff8000', '#00ff80', '#0080ff'];

      var novelColor = "green",
          color1 = "blue",
          color2 = "red",
          color3 = "saddlebrown",
          color12 = "#a09d01",
          color13 = "#6b5b3e",
          color23 = "#ce6702",
          color123 = "#6d1c8e",
          colorMap = [color1, color2, color3, novelColor, color123, color12, color23, color13],
          windowFields = ['Gene Name:', ' ', 'Interactions:', 'Confidence:'];

      /*var uniquePathways = function(df){
        var lookup = {};
        var result = [];

        for (var i = 0; i<df.length; i++) {
          var name = df[i].parent.name;

          if (!(name in lookup)) {
            lookup[name] = 1;
            if(name === 'Novel'){
              result.push('Novel Genes');
            }
            result.push(name);
          }
        }

        result.sort();
        result.push(result.splice(result.indexOf('Novel Genes'), 1)[0]);

        return(result)
      }*/

      var cluster = d3.layout.cluster()
        .size([360, ry - 120])
        //.sort(function(a, b) { return d3.ascending(df.indexOf(a), df.indexOf(b)); });
        .sort(function(a, b) { return d3.ascending(a.order, b.order)})

      var bundle = d3.layout.bundle();

      var line = d3.svg.line.radial()
        .interpolate("bundle")
        .tension(.85)
        .radius(function(d) { return d.y; })
        .angle(function(d) { return d.x / 180 * Math.PI; });

      // Chrome 15 bug: <http://code.google.com/p/chromium/issues/detail?id=98951>
      var div = d3.select('body').insert("div")
        .attr("class", "d3network")
        .style("top", headSpace + "px")
        //.style("left", "0px")
        .style("width", w + "px")
        .style("height", w + "px")
        .style("position", "absolute")
        .style("-webkit-backface-visibility", "hidden");

      var svG = div.append("svg:svg")
        .attr("width", w)
        .attr("height", w)

      var legend = svG.append("svg:g")
        .attr("transform", "translate(5,5)")

      //slider for tension
      div.append('input')
        .attr("type", "range")
        .attr("class", "tension")
        .attr("min", 0)
        .attr("max", 100)
        .on("change", function() {
          line.tension(this.value / 100);
          path.attr("d", function(d, i) { return line(splines[i]); });
        });

      //slider for text size
      div.append('input')
        .attr("type", "range")
        .attr("class", "textSize")
        .attr("min", 1)
        .attr("max", 18)
        .attr("step", 0.2)
        .attr("value", Math.min(1/Math.log10(df.length)*15, 14))
        .on("change", function() {
          d3.selectAll(".node text").style("font-size", this.value);
        });

      //slider for node size
      div.append('input')
        .attr("type", "range")
        .attr("class", "nodeSize")
        .attr("min", 0.5)
        .attr("max", 10)
        .attr("step", 0.1)
        .attr("value", Math.min(1/Math.log10(df.length)*5, 4))
        .on("change", function() {
          d3.selectAll(".node circle").style("r", this.value)
        });

      //slider for window and legend text size
      div.append('input')
        .attr("type", "range")
        .attr("class", "wTextSize")
        .attr("min", 1)
        .attr("max", 24)
        .attr("step", 1)
        .attr("value", 14)
        .on("change", function() {
          legend.selectAll("text").attr("font-size", this.value)
          //d3.selectAll(".vizText").attr("font-size", this.value)
        });


      sliderText = ['Tension', 'Text Size', 'Node Size', 'Legend Text']

      var sliderSVG = svG.append("svg:g")
        .attr("width", w)
        .attr("height", 20)
        .attr("class", "slidersvg")
        .attr("transform", "translate(700," + (h - 435) + ")")

      // sliderChange will depend on if the user's OS is Windows or not
      sliderChange = navigator.userAgent.indexOf("Windows") != -1 ? [5, 102, 200, 295] : [0, 90, 180, 270]

      sliderSVG.selectAll("text")
        .data(sliderText)
        .enter()
        .append("svg:text")
        .attr("font-family", "Helvetica")
        .attr("font-size", 14)
        .attr("dy", function(d,i){return sliderChange[i]})
        .text(function(d){return d;});

      // button for going back in clicked pathways
      var revert = svG.append("svg:g")
        .attr("class", "revert")
        .attr("transform", "translate(685,265)")

      revert.append("svg:rect")
        .attr("height", 20)
        .attr("width", 107)
        .attr("rx", 10)
        .attr("ry", 10)
        .style("stroke", "black")
        .style("fill", "none")
        .style("stroke-width", 2);

      revert.append("svg:text")
        .attr("font-family", "Helvetica")
        .style("text-anchor", "center")
        .attr("dy", 15)
        .attr("dx", 8)
        .text('Revert Click')
        .on("click", revertOne);

      var nodes = cluster.nodes(root(df)),
          links = imports(nodes),
          splines = bundle(links),
          parents = findParents(df);

      /*var numbNovel = 0;
      var numbNoNovel = 0;
      for(i in df){
        if(df[i].parent.name == "Novel"){
          numbNovel ++;
        }
        else{
          numbNoNovel ++;
        }
      }
      var shiftRotate = -(numbNoNovel)/(numbNovel + numbNoNovel) * 180;*/

      var svg = svG.append("svg:g")
        //.attr("x", rx)
        //.attr("y", ry)
        .attr("class", "networkGraph")
        .attr("transform", "translate(" + rx + "," + ry + ")")
        //rotate(" + shiftRotate + ")");

      var windowArea = svG.append("svg:g")
        .attr("transform", "translate(638,5)")

      windowArea.append("svg:rect")
        .attr("height", rectH)
        .attr("width", rectW)
        .attr("rx", 5)
        .attr("ry", 5)
        .style("stroke", novelColor)
        .style("fill", "none")
        .style("stroke-width", 2);

      var dubsMessage = svG.append("svg:g")
        .attr("transform", "translate(685, 170)")
        .attr("class", "resetButton");

      dubsMessage.append("svg:rect")
        .attr("height", 20)
        .attr("width", 107)
        .attr("rx", 10)
        .attr("ry", 10)
        .style("stroke", "black")
        .style("fill", "none")
        .style("stroke-width", 2);

      dubsMessage.append("svg:text")
        //.style("font-size", "12px")
        .attr("font-family", "Helvetica")
        .style("text-anchor", "center")
        .attr("dy", 15)
        .attr("dx", 5)
        .text('Click to reset')
        .on("click", mousedbl);

      //d3.select(".resetButton")

      //d3.select('.revert')

      /*dubsMessage.append("svg:text")
        .style("font-size", "12px")
        .attr("dy", "1em")
        .text('to reset')*/

      var windowText = windowArea.selectAll("text")

      windowText.data(windowFields)
        .enter()
          .append("svg:text")
          .attr("class", "vizText")
          .style("fill", "black")
          .attr("transform", function(d) { return "translate(0,20)"; })
          .attr("font-family", "Helvetica")
          .attr("font-size", 14)
          .attr("dy", function(d,i){return(20*i)})
          .attr("dx", 2)
          .text(function(d) { return d; });

      var pathButton = svG.append("svg:g")
        .attr("transform", "translate(710, 200)")
        .attr("class", "pathButton")

      pathButtonTxt = ["Highlight", "Clicked", "Pathways"]

      pathButton.selectAll("text")
        .data(pathButtonTxt)
        .enter()
          .append("svg:text")
          //.attr("class", "pathButton")
          .style("text-anchor", "center")
          .attr("dx", 5)
          .attr("dy", function(d, i){return 16*i + 16;})
          .attr("font-family", "Helvetica")
          .text(function(d){return d;})
          .on("click", drawConnections);

      pathButton.append("svg:rect")
        .attr("height", 55)
        .attr("width", 80)
        .attr("rx", 10)
        .attr("ry", 10)
        //.attr("class", "pathButton")
        .style("stroke", "black")
        .style("fill", "none")
        .style("stroke-width", 2)
        //.on("click", drawConnections);

      /*.append("svg:text")
        .attr("dy", 14)
        .attr("dx", 1)
        .style("font-size", "12px")
        .attr("font-family", "Helvetica")
        .text("Highlight Clicked Pathways")*/

      svg.append("svg:path")
        .attr("class", "arc")
        .attr("d", d3.svg.arc().outerRadius(ry - 120).innerRadius(0).startAngle(0).endAngle(2 * Math.PI))
        //.on("mousedown", mousedown);

      // testing data for console development
      // var myurl = "https://gist.githubusercontent.com/mbostock/1044242/raw/3ebc0fde3887e288b4a9979dad446eb434c54d08/flare.json"
      // var json_flare = await $.getJSON(myurl)

      // find all names of parentNames
      function findParents(classes){
        var map = {};

        function find(f){
          map[f.parent.name] = f.parent.name;
        }

        classes.forEach(function(d) {
          find(d);
        })

        arr = Object.keys(map);
        arr.splice(arr.indexOf("Novel"), 1);
        for(var i=0;i<arr.length;i++){
          arr[i]=arr[i] + " (TRIAGE hits)";
        }
        arr.push("Novel")

        return arr;
      }

      // Lazily construct the package hierarchy from class names.
      function root(classes) {
        var map = {};

        function find(name, f) {
          var node = map[name], i;
          if (!node) {
            node = map[name] = f || {name: name, children: []};
            if (name.length) {
              node.parent = find(name.substring(0, name.indexOf(".")));
              node.parent.children.push(node);
              node.key = name.substring(name.lastIndexOf(".") + 1);
            }
          }
          return node;
        }

        classes.forEach(function(d) {
          find(d.name, d);
        });

        return map[""];
      }

      // Return a list of imports for the given array of nodes.
      function imports(nodes) {
        var map = {},
            imports = [];

        // Compute a map from name to node.
        nodes.forEach(function(d) {
          map[d.name] = d;
        });

        // For each import, construct a link from the source to target node.
        nodes.forEach(function(d) {
          if (d.imports) d.imports.forEach(function(i) {
            imports.push({source: map[d.name], target: map[i]});
          });
        });

        return imports;
      }

      /*else if(pathwayNames.length === 3){
        colorMapt = colorMap.slice(0,2)
        colorMapt.push(colorMap[3])
        colorMap = colorMapt
      }*/

      /*var daMaps = colorMap.slice(0,1)

      daMaps.push(novelColor)*/

      // counters for number of novel genes and non-novel genes
      /*for(i in df){
        if(df[i].parent.name === "Novel"){
          numbNovel ++;
        }
        else{
          numbNoNovel ++;
        }
      }*/

      var colorMapping = function(df){
        newCols = []
        for(i in df){
          if(!(newCols.includes(df[i].color))){
            newCols.push(df[i].color)
          }
        }
        newCols.splice(newCols.indexOf(novelColor), 1);
        newCols.push(novelColor);
        return newCols;
      }

      startingColors = colorMapping(df)

      var ordColors = []

      for(j in colorMap){
        if(startingColors.includes(colorMap[j])){
          ordColors.push(colorMap[j])
        }
      }

      var novelInd = ordColors.indexOf(novelColor)

      var getLegendColors = function(){
        check = 0
        for(i in parents){
          if(parents[i].includes(" & ")){
            check = 1
          }
        }
        if(check){
          lColors = ["#000000"];
          lColors = lColors.concat(ordColors.slice(0, novelInd+1));
          lColors.push("#000000", "#000000", "#000000");
          lColors = lColors.concat(ordColors.slice(novelInd+1));
        }
        else{
          lColors = ordColors;
        }
        return lColors;
      }

      var legendColors = getLegendColors()

      var pathwayNames = parents.slice(0);

      /*colorMapt = colorMap.slice(0, parents.length - 1)
      colorMapt.push(colorMap[7])
      colorMap = colorMapt.slice(0)*/

      /*var colorText = function(d){
        for(i in parents){
          if(d === parents[i]){
            return colorMap[i];
          }
        }
      }*/

      /*var loopColors = function(color, s){


      }*/

      var fixPathwayNames = function(pns){
        console.log(pns)
        pathways = ["Pathways:"]
        overlaps = [" ", "Genes in Overlapping", "Pathways:"]
        abc = ["1: ", "2: ", "3: "]
        abcs = ["1 & 2", "1 & 3", "2 & 3", "1 & 2 & 3"]
        n = startingColors.length
        pns = pns.slice(0)
        check = 0
        for(i in pns){
          if(pns[i].includes(" & ")){
            check = 1
          }
        }
        if(!check){
          pns.splice(pns.indexOf('Novel'), 1 );
          pns.sort()
          pns[pns.length] = "Additional TRIAGE hits"
        }
        else{
          for(s in ordColors){
            color = ordColors[s]
            switch (color) {
              case color1:
                nS = abc[0] + pns[startingColors.indexOf(color)];
                pathways.push(nS)
                break;
              case color2:
                nS = abc[1] + pns[startingColors.indexOf(color)];
                pathways.push(nS)
                break;
              case color3:
                nS = abc[2] + pns[startingColors.indexOf(color)];
                pathways.push(nS)
                break;
              case novelColor:
                nS = "Additional TRIAGE hits";
                pathways.push(nS)
                break;
              case color12:
                nS = abcs[0];
                overlaps.push(nS)
                break;
              case color13:
                nS = abcs[1];
                overlaps.push(nS)
                break;
              case color23:
                nS = abcs[2];
                overlaps.push(nS)
                break;
              case color123:
                nS = abcs[3];
                overlaps.push(nS)
                break;
            }
            // (s <= novelInd) ? pathways.push(nS) : overlaps.push(nS);
          }




          /*for(i in pns){
            if(!(pns[i].includes(" & "))){
              pathways.push(pns[i])
            }
          }
          // sorting out pathways first
          pathLength = pathways.length
          newAbc = abc.slice(0, pathLength-1)
          newAbc.push("")
          for(s in newAbc){
            pathways[s] = newAbc[s] + pathways[s]
          }
          pathways.splice(pathways.indexOf("Novel"), 1, "Novel Genes")
          pathways.splice(0, 0, "Pathways:")*/

          // now sorting overlaps
          /*overlapMaps = startingColors.slice(novelInd+1)
          if(overlapMaps.includes(color12)){
            overlaps.push(abcs[0])
          }
          if(overlapMaps.includes(color13)){
            overlaps.push(abcs[1])
          }
          if(overlapMaps.includes(color23)){
            overlaps.push(abcs[2])
          }
          if(overlapMaps.includes(color123)){
            overlaps.push(abcs[3])
          }*/

          // bringing them together
          pnsSort = pathways.concat(overlaps)
          pns = pnsSort
        }
        return pns;
      }



        /*abc = ["1: ", "2: ", "3: ", ""]
        check = 0
        for(i in pns){
          if(pns[i].includes(" & ")){
            check = 1
          }
        }
        if(!check){
          pns[pns.length-1] = "Novel Genes"
        }
        else{
          // slice is used to create a seperate copy of the arrays
          pnsSort = pns.slice(0)
          //pnsInd = []
          abcs = ["1 & 2", "1 & 3", "2 & 3", "1 & 2 & 3"]
          pnsShorts = []
          pnsLongs = []
          pnsShortInds = []
          pnsLongInds = []
          for(i in pns){
            if(pns[i].includes(" & ")){
              pnsLongInds.push(i)
              pnsLongs.push(pns[i])
            }
            else{
              pnsShortInds.push(i)
              pnsShorts.push(pns[i])
            }
          }
          pnsInd = pnsShortInds.slice(0)
          /*cmInd = []
          for(p in pnsLongInds){
            cmInd = pnsInd.splice(pnsInd.length-1, 0, pnsLongInds[p]).concat(cmInd)
          }
          colorMap = pnsInd.map((item) => (colorMap[item]))
          pnsSort = pnsShortInds.map((item) => pnsSort[item])
          for(s in pnsShortInds){
            pnsSort[s] = abc[s] + pnsSort[s]
          }
          //cm = pnsShorts.map((item) => colorMap[item])
          for(k in pnsLongs){
            inds = []
            for(s in pnsSort){
              if(pnsLongs[k] == pns[s]){
                dummyStrings = pns[s].split(" & ")
                for(j in dummyStrings){
                    whichInds = pnsShorts.indexOf(dummyStrings[j])
                    inds.push(whichInds)
                }
              }
            }
            if([0,1].every(r => inds.includes(r)) && inds.every(r => [0,1].includes(r))){
              pnsSort.splice(pnsSort.length, 0, abcs[0])
            }
            else if([0,2].every(r => inds.includes(r)) && inds.every(r => [0,2].includes(r))){
              pnsSort.splice(pnsSort.length, 0, abcs[1])
            }
            else if([1,2].every(r => inds.includes(r)) && inds.every(r => [1,2].includes(r))){
              pnsSort.splice(pnsSort.length, 0, abcs[2])
            }
            else if([0,1,2].every(r => inds.includes(r))){
              pnsSort.splice(pnsSort.length, 0, abcs[3])
            }
          }
          // fixing order
          pnsSortInds = {}
          for(var i = 0; i < pnsSort.length; i++){
            if(pnsSort[i].includes("&")){
              if(pnsSort[i].includes("1") && pnsSort[i].includes("2") && pnsSort[i].includes("3")){
                pnsSortInds[123] = i
              }
              else if(pnsSort[i].includes("1") && pnsSort[i].includes("2")){
                pnsSortInds[12] = i
              }
              else if(pnsSort[i].includes("1") && pnsSort[i].includes("3")){
                pnsSortInds[13] = i
              }
              else if(pnsSort[i].includes("2") && pnsSort[i].includes("3")){
                pnsSortInds[23] = i
              }
            }
          }
          pnsNewInds = []
          for (var i = 0; i != pnsShorts.length; ++i) pnsNewInds.push(i)
          pnsNewInds = pnsNewInds.concat(Object.values(pnsSortInds))
          pnsSort = pnsNewInds.map((item) => pnsSort[item])
          /*for(var j = 0; j <= pnsMax-pnsMin; i++){
            pnsSort.splice(j, 1, pnsSort)
          }
          // adding more words to legendtext
          pnsSort.splice(pnsSort.indexOf("Novel"), 1, "Novel Genes")
          pnsSort.splice(0, 0, "Pathways:")
          pnsSort.splice(pnsShorts.length+1, 0, " ")
          pnsSort.splice(pnsShorts.length+2, 0, "Genes in Overlapping")
          pnsSort.splice(pnsSort.indexOf("Genes in Overlapping")+1, 0, "Pathways:")
          pns = pnsSort
        }
        return pns;
      }*/

      pathwayNames = fixPathwayNames(pathwayNames);

      /*var getLegendColors = function(){
        novelInd = startingColors.indexOf(novelColor)
        n = startingColors.length - 1
        m = startingColors.slice(novelInd+1).length
        check = 0
        if(m > 0){
          check = 1
        }
        if(!check){
          return startingColors;
        }

      }



        /*legendColors = ["#000000", startingColors[0]]
        for(s in pws){
          if(pws[s].includes("2:")){
            legendColors.push(colorMap[1])
          }
          else if(pws[s].includes("3:")){
            legendColors.push(colorMap[2])
          }
          else if(pws[s] === "Novel Genes"){
            legendColors.push(colorMap[7])
          }
          else if(pws[s] === " "){
            legendColors.push("#000000")
          }
          else if(pws[s] === "Genes in Overlapping"){
            legendColors.push("#000000", "#000000")
          }
          if(pws[s] === "1 & 2"){
            legendColors.push(colorMap[3])
          }
          else if(pws[s] === "1 & 3"){
            legendColors.push(colorMap[4])
          }
          else if(pws[s] === "2 & 3"){
            legendColors.push(colorMap[5])
          }
          else if(pws[s] === "1 & 2 & 3"){
            legendColors.push(colorMap[6])
          }
        }
        return legendColors;
      }

      lColors = getLegendColors();*/

      /*var uniqueParents = function(df){
        var lookup = {};
        //var result = [];

        for (var i = 0; i<df.length; i++) {
          var name = df[i].parent.name;
          if(!(name in lookup)){
            lookup[name] = name;
          }
          /*if (!(name in lookup)) {
            lookup[name] = 1;
            if(name === 'Novel'){
              result.push('Novel Genes');
            }
            result.push(name);
          }
        }

        //result.sort();
        //result.push(result.splice(result.indexOf('Novel Genes'), 1)[0]);

        return(lookup)
      }*/

      legend.selectAll("text")
        .data(pathwayNames)
        .enter()
        .append("svg:text")
        .style("fill", function(d, i) {return legendColors[i];})
        .attr("id", function(d, i){return 'text' + i})
        .attr("transform", function(d) {return "translate(0,20)";})
        .attr("font-family", "Helvetica")
        .attr("dy", function(d,i) {
          return 20*i
        })
        .text(function(d) { return d; });

      //legendText
        /*.attr("dx", function(d,i) {
          if(i>2 && i%2 === 1 && i!==(pathwayNames.length-1)){
            return 340;
          }
          else{
            return 0;
          }
        })
        .style("font-size", function(){
          return (Math.min(1/Math.log10(parents.length)*10, 14))
        })*/

      var path = svg.selectAll("path.link")
          .data(links)
        .enter().append("svg:path")
          .attr("class", function(d) { return "link source-" + d.source.key + " target-" + d.target.key; })
          .attr("d", function(d, i) { return line(splines[i]); })
          .style('stroke', function(d) {
            if(d.source.parent.name === 'Novel'){
              return d.target.color;
            }
            else{
              return d.source.color;
            }
          })
          .style("stroke-opacity", 0.05);
          //.attr("transform", function(d) { return "rotate(" + (d.x - 110) + ")"});

      var allNodes = svg.selectAll("g.node")
          .data(nodes.filter(function(n) { return !n.children; }))
        .enter().append("svg:g")
          .attr("class", "node")
          .attr("id", function(d) { return "node-" + d.key; })
          .attr("parentNode", function(d) { return d.parent.name;})
          .attr("transform", function(d) { return "rotate(" + (d.x - 90) + ")translate(" + d.y + ")"; });

      allNodes.append("svg:circle")
          //.attr("cx", function (d) { return d.x; })
          //.attr("cy", function (d) { return d.y; })
          //.attr("r", function (d) { return 1; })
          .attr("r", Math.min(1/Math.log10(df.length)*5, 4))
          .style("fill", function(d) { return d.color; })
          .on("mouseover", mouseover)
          .on("mouseout", mouseout)
          .on("click", mouseclick);

      allNodes.append("svg:text")
          .style("fill", function(d){ return d.color;})
          .style("font-size", function(){
            return Math.min(1/Math.log10(df.length)*15, 14)
          })
          .attr("font-family", "HelveticaNeue-Light")
          .attr("dx", function(d) { return d.x < 180 ? 8 : -8; })
          .attr("dy", ".31em")
          .attr("text-anchor", function(d) { return d.x < 180? "start" : "end"; })
          .attr("transform", function(d) { return d.x < 180 ? null : "rotate(180)"; })
          .text(function(d) { return d.key; })
          .on("mouseover", mouseover)
          .on("mouseout", mouseout)
          .on("click", mouseclick);

      var still = false;

      svg.on("dblclick", mousedbl)
        .on("mousemove", mousemove)
        .on("mousedown", mousedown)
        .on("mouseup", mouseup);

      function mouse(e) {
        //console.log(e.pageX - rx)
        //console.log(e.pageY - ry)
        return [e.pageX - rx, e.pageY - ry];
      }

      function mousedown() {
        m0 = mouse(d3.event);
        d3.event.preventDefault();
      }

      function mousemove() {
        if (m0) {
          var m1 = mouse(d3.event),
              dm = Math.atan2(cross(m0, m1), dot(m0, m1)) * 180 / Math.PI,
              //rotate =+ dm;
              rotate1 = rotate ? rotate+dm : dm;
              //rotate = shiftRotate
              //rotate += dm

          svg.style("-webkit-transform", "translateX(" + rx + "px)translateY(" + ry + "px)rotateZ(" + rotate1 + "deg)");
        }
      }

      function mouseup() {
        if (m0) {
          var m1 = mouse(d3.event),
              dm = Math.atan2(cross(m0, m1), dot(m0, m1)) * 180 / Math.PI;

          rotate = rotate ? rotate+dm : dm;
          if (rotate > 360) rotate -= 360;
          else if (rotate < 0) rotate += 360;
          m0 = null;

          //div.style("-webkit-transform", null);
          svg.style("-webkit-transform", null);

          svg.attr("transform", "translate(" + rx + "," + ry + ")rotate(" + rotate + ")")
              //.attr("transform", "rotate(" + rotate + ")")
            .selectAll("g.node text")
              .attr("dx", function(d) { return (d.x + rotate) % 360 < 180 ? 8 : -8; })
              .attr("text-anchor", function(d) { return (d.x + rotate) % 360 < 180 ? "start" : "end"; })
              .attr("transform", function(d) { return (d.x + rotate) % 360 < 180 ? null : "rotate(180)"; });
        }
      }

      function mouseover(d) {
        if(!still){
          if(!d.clicked){
            if(clickedData.length === 0 || childrenArray.indexOf(d.name) > -1){
              /*svg.select("#node-" + d.key)
                  .style('font-weight', 'bold');*/
              setvals(d, true, false);
            }
            if(clickedData.length === 0){
              d3.selectAll(".vizText").remove()
              //geneFamily = fixStrings(d.parent.name)
              paintWindow(d, 1);
            }
            else if(childrenArray.indexOf(d.name) > -1){
              d3.selectAll(".vizText").remove()
              paintWindow(d, 3);
            }
          }
          else{
              setvals(d, true)
              /*svg.select("#node-" + d.key)
                  .style('font-weight', 'bold');*/
          }
        }
      }

      function mouseout(d) {
        if(!still){
          var i = clickedData.length>1 ? clickedData.length-1 : 0;
          if(!d.clicked){
            setvals(d, false);
            /*svg.select("#node-" + d.key)
                .style('font-weight', 'normal');*/
            if(clickedData.length>=1){
              setvals(clickedData[i], true, false)
            }
          }
          else if(clickedData.length === 1){
            setvals(d, true, false)
            setvals(clickedData[i], true, false)
          }
          if(clickedData.length === 0){
            clearVizText()
          }
          else{
            d3.selectAll(".vizText").remove()
            paintWindow(d, 2);
          }
        }
      }

      function mouseclick(d){
        if(!still){
          d.clicked = !d.clicked && true;

          clickedData.push(d)

          if(d.clicked){
            removelinks()

            setvals(d, true, false)

            d3.selectAll(".vizText").remove()

            paintWindow(d, 1);

            updateChildren(d)

            d3.selectAll(".node text").style("font-weight", "normal")

            childrenArray = childrenData[d.name][0]

            d3.select("#node-" + d.key + " text").style("font-weight", "bold")

            for(i in childrenArray){
              childName = childrenArray[i].split(".")[1]
              d3.select("#node-" + childName + " text").style("font-weight", "bold")
            }

          }
          else if(clickedData[clickedData.length-1].name === d.name){
            setvals(d, true, false)
          }
          else{
            clickedData.pop()

            updateChildren(d, true)

            setvals(d, false, false)
          }
        }
      }

      function mousedbl(){
        childrenData = {}
        childrenArray = []
        still = false;
        rotate = null;

        svg.selectAll("path.link")
            .style("stroke-opacity", 0.05)

        if(clickedData.length>0){
          for(var i in clickedData){
            setvals(clickedData[i], false, false)
            clickedData[i].clicked = false
            /*svg.select("#node-" + clickedData[i].key)
                .style('font-weight', 'normal');*/
          }
          clickedData = []
        }

        svg.selectAll(".node text")
          .style("font-weight", "normal")
          .style("opacity", 1)

        svg.selectAll(".node circle").style('opacity', 1)

        svg.attr("transform",  "translate(" + rx + "," + ry + ")")
        clearVizText()
      }

      function clearVizText(){
        d3.selectAll(".vizText").remove()
        windowFields = ['Gene Name:', ' ',
                        'Interactions:',
                        'Confidence:']
        windowText.data(windowFields)
          .enter()
            .append("svg:text")
            .attr("class", "vizText")
            .style("fill", "black")
            .attr("font-family", "Helvetica")
            .attr("transform", function(d) { return "translate(0,20)"; })
            .attr("dy", function(d,i){return(20*i)})
            .attr("dx", 2)
            //.attr("font-size", d3.select(".wTextSize").node().value)
            .text(function(d) { return d; });
      }


      function updateChildren(d, remove=false){
        childrenArray = []

        if(!remove){
          childrenData = {[d.name]: [d.imports]}
        }
        else{
          delete childrenData[d.name]
        }
      }

      /*linkColorFunc = function(d){
        hits = d.imports
        hitColors = []
        if(d.parent.name === 'Novel Genes'){
          for(i in hits){
            for(j in df){
              if(df[j].key === hits[i].split('.')[1]){
                hitColors.push(df[j].color)
              }
            }
          }
          return hitColors;
        }
      }*/

      /*updateColors = function(d, val){
        hits = d.imports
        hitColors = []
        if(val){
          for(i in hits){
            for(j in df){
              if(df[j].name === hits[i]){
                hitColors.push(df[j].color)
              }
            }
          }
        }
        else{
          hitColors = Array(hits.length).fill(defLinkColor)
        }
        return(hitColors)
      }*/

      function setvals(d, val, block=true, pop=8){
        if(block){
          if(svg.selectAll("path.link.target-" + d.key).classed("target") === val){
            return;
          }
        }

        svg.selectAll("path.link.target-" + d.key)
            .classed("target", val)
            .style("stroke-opacity", val*.95 + .05)
            .each(updateNodes("source", val, pop));

        svg.selectAll("path.link.source-" + d.key)
            .classed("source", val)
            .style("stroke-opacity", val*.95 + .05)
            .each(updateNodes("source", val, pop));

        svg.selectAll(".node.source text")
            .filter(function(){
              return d3.select(this).attr("dx") == 8
            })
            .attr("dx", pop*val + pop)
            .style("font-weight", "bold")

        svg.selectAll(".node.source text")
            .filter(function(){
              return d3.select(this).attr("dx") == -8
            })
            .attr("dx", -pop*val - pop)
            .style("font-weight", "bold")

        svg.selectAll(".node")
            .filter(function(){
              return d3.select(this).select(" text").attr("dx") > 8 && d3.select(this).attr("class") === "node";
            })
            .selectAll(" text")
            .attr("dx", 8)
            .style("font-weight", "normal")

        svg.selectAll(".node")
            .filter(function(){
              return d3.select(this).select(" text").attr("dx") < -8 && d3.select(this).attr("class") === "node";
            })
            .selectAll(" text")
            .attr("dx", -8)
            .style("font-weight", "normal")

      }

      function updateNodes(name, value) {
        return function(d) {
          if (value) this.parentNode.appendChild(this);

          lastclicked = clickedData[clickedData.length-1];
          nodeBold = value || lastclicked===d[name] ? 'bold' : 'normal';

          svg.select("#node-" + d[name].key)
            .classed(name, value)
            /*.select(" text")
              .attr("dx", function(d){
                if(d.dx === "8" ){
                  return 14;
                }
                else if(d.dx === "-8"){
                  return -14;
                }
                else{
                  return pop*value + pop;
                }
              })*/
            //.style('font-weight', nodeBold);

          /*svg.selectAll("#node-" + d[name].key + " text")
            .attr("dx", function(d){
              deeX = svg.select("#node-" + d[name].key + " text").attr("dx")
              if(deeX === "8" ){
                return 14;
              }
              else if(deeX === "-8"){
                return -14;
              }
            })
            .style('font-weight', nodeBold);*/

          //console.log(d[name].key);

          //rotate = rotate ? shiftRotate : rotate;

          /*svg.select("#node-" + d[name].key + " text")
              //.attr("dx", 15)
              .attr("dx", function(d) { return d.dx === "-8" ? pop*value*(-1) - pop : pop*value + pop; })
              //.attr("dx", function(d) { return pop*value+pop})
              //.attr("dy", function(d) { return d.y + pop })
              //.attr("dx", function(d) { return (pop)})
              //.attr("text-anchor", function(d) { return (d.x + rotate) % 360 < 180 ? "start" : "end"; })
              //.transition(200)
              //.attr("transform", function(d) { console.log(d.dx); return "translate(" + d.dx+pop + "," + pop + ")"; })
              //.attr("transform", function(d) { return (d.x + rotate) % 360 < 180 ? null : "translate(5,5)"; })
              //.attr("dx", function(d) { return (d.x + rotate) % 360 < 180 ? 8 : -8; })
              //.attr("text-anchor", function(d) { return (d.x + rotate) % 360 < 180 ? "start" : "end"; })
              //.attr("transform", function(d) { return (d.x + rotate) % 360 < 180 ? null : "rotate(180)"; });
              .style('font-weight', nodeBold);
              //.attr("transform", function(d) {"translate(" + rx + "+5, " + ry + "+5)"});
              //.attr("transform", "translate(240,240)")
              //.attr("dx", function(d) { return d.x < 180 ? 8 : -8; })
              //.attr("dy", ".31em")
              //.attr("text-anchor", function(d) { return d.x < 180 ? "start" : "end"; })
              //.attr("transform", function(d) { return d.x < 180 ? null : "rotate(180)"; })
              //.attr("transform", function(d) { return "translate(" + (d.x - 2) + "," + (d.y - 2) + ")"; });
              //.attr("transform", function(d) { return "rotate(" + (d.x - 90) + ")"; });
              //.attr("transform", function(d) { return "rotate(" + (d.x - 90) + ")translate(" + (d.y + pop*value) + ")"; });
              //.attr("dx", d.dx+pop)
              //.attr("transform", function(d) {"translate(" + 100 + "," + 100 + ")"});
              //.style("-webkit-transform", "translateY(" + (ry - rx) + "px)");
              //.attr("dx", function(d) {"30em"})*/
        };
      }

      function removelinks(){
        for(var i = 0; i < clickedData.length-1; i++){
          clickedData[i].clicked = false

          svg.selectAll("path.link.target-" + clickedData[i].key)
            .classed('target', false)
            .style("stroke-opacity", 0.05)
            .each(updateNodes("source", false));

          svg.selectAll("path.link.source-" + clickedData[i].key)
            .classed('source', false)
            .style("stroke-opacity", 0.05)
            .each(updateNodes("target", false,));

          /*textVal = svg.select("#node-" + clickedData[i].key + " text")

          if(textVal.attr("dx") > 8){
            textVal.attr("dx", 8)
          }
          else if(textVal.attr("dx") < 8){
            textVal.attr("dx", -8)
          }*/

          /*svg.select("#node-" + clickedData[i].key + " text")
              .filter(function(){
                return d3.select(this).attr("dx") > 8
              })
              .attr("dx", 8)

          svg.selectAll(".node text")
              .filter(function(){
                return d3.select(this).attr("dx") < -8 && !d.clicked
              })
              .attr("dx", -pop*val - pop)*/
        }
      }

      // goes back one clicked node in the network display and shows all output for the previous node
      function revertOne(){
        if(still === false && clickedData.length > 0){
          deleteGene = clickedData[clickedData.length-1]

          setvals(deleteGene, false, false)
          deleteGene.clicked = false

          d3.selectAll(".node text")
            .style("font-weight", "normal")

          d3.selectAll("path.link")
            .style("stroke-opacity", 0.05)

          clickedData.pop()
          geneRevert = clickedData[clickedData.length-1]

          setvals(geneRevert, true, false)

          clearVizText()

          updateChildren(geneRevert)
          childrenArray = childrenData[geneRevert.name][0]

          paintWindow(geneRevert, 1)
        }
      }

      function drawConnections(){
        still = true;
        nConn = clickedData.length
        if(nConn === 0){
          still = false
          return;
        }
        else if(nConn === 1){
          svg.selectAll("path.link")
              .classed("source", false)
              .style("stroke-opacity", 0.01)

          svg.selectAll(".node text").style('opacity', 0.5)

          svg.selectAll(".node circle").style('opacity', 0.5)

          sourceName = clickedData[0].key

          svg.selectAll("path.link.source-" + sourceName)
              .classed("source", true)
              .style("stroke-opacity", 1)

          svg.selectAll(".node")
              .filter(function(){
                return d3.select(this).select(" text").attr("dx") != 8 &&
                        d3.select(this).select(" text").attr("dx") != -8 &&
                        d3.select(this).attr("class") !== "node";
              })
              .selectAll(" text")
              .style('opacity', 1)
              .style("font-weight", "bold")

          svg.selectAll(".node")
              .filter(function(){
                return d3.select(this).select(" text").attr("dx") != 8 &&
                        d3.select(this).select(" text").attr("dx") != -8 &&
                        d3.select(this).attr("class") !== "node";
              })
              .selectAll(" circle")
              .style("opacity", 1)

        }
        else{
          svg.selectAll("path.link")
              .classed("source", false)
              .style("stroke-opacity", 0.01)

          svg.selectAll(".node text")
              .style("font-weight", "normal")
              .style('opacity', 0.5)

          svg.selectAll(".node circle").style('opacity', 0.5)

          svg.selectAll(".node")
              .filter(function(){
                return d3.select(this).select(" text").attr("dx") < -8;
              })
              .selectAll(" text")
              .attr("dx", -8)

          svg.selectAll(".node")
              .filter(function(){
                return d3.select(this).select(" text").attr("dx") > 8;
              })
              .selectAll(" text")
              .attr("dx", 8)

          for(i in clickedData){
            i = parseInt(i)
            if(i != nConn-1){
              sourceName = clickedData[i].key
              targetName = clickedData[i+1].key
              svg.select("path.link.source-" + sourceName + ".target-" + targetName)
                  .classed("source", true)
                  .style("stroke-opacity", 1)
            }
            svg.select("#node-" + clickedData[i].key + " text")
                .attr("dx", function(d){
                  if(d3.select("#node-" + clickedData[i].key + " text").attr("dx") == -8){
                    return -16;
                  }
                  else{
                    return 16;
                  }
                })
                .style('font-weight', 'bold')
                .style('opacity', 1);

            svg.select("#node-" + clickedData[i].key + " circle")
                .style("opacity", 1)


            /*svg.selectAll(".node")

                .selectAll(" text")
                .attr("dx", 8)

            svg.selectAll(".node")
                .filter(function(){
                  return d3.select(this).select(" text").attr("dx") < -8 && d3.select(this).attr("class") === "node";
                })
                .selectAll(" text")
                .attr("dx", -8)*/
          }
        }
      }

      function cross(a, b) {
        return a[0] * b[1] - a[1] * b[0];
      }

      function dot(a, b) {
        return a[0] * b[0] + a[1] * b[1];
      }

      function paintWindow(d, option){
        if(option === 1){
          windowFields = ['Gene Name: ',
                          d.key,
                          'Interactions: ' + d.datasource.length,
                          'Confidence: ' + d.Confidence]
          windowFields = [].concat.apply([], windowFields);
          var textColor = d.color
          windowText.data(windowFields)
            .enter()
              .append("svg:text")
              .attr("class", "vizText")
              .style("fill", function(d, i){
                if(i===1){
                  return textColor;
                }
              })
              .attr("font-family", "Helvetica")
              .attr("transform", function(d) { return "translate(0,20)"; })
              .attr("dy", function(d, i){
                return i*20;
              })
              .attr("dx", function(d, i){
                if(i===1){
                  return 10;
                }
                else{
                  return 2;
                }
              })
              //.attr("font-size", d3.select(".wTextSize").node().value)
              .text(function(d){return d;});
        }
        else if(option === 2){
          n = clickedData[clickedData.length-1]
          //geneFamily = fixStrings(n.parent.name)
          windowFields = ['Gene Name: ',
                          n.key,
                          'Interactions: ' + n.datasource.length,
                          'Confidence: ' + n.Confidence]
          windowFields = [].concat.apply([], windowFields);
          var textColor = n.color;
          var windowL = windowFields.length;
          windowText.data(windowFields)
            .enter()
              .append("svg:text")
              .attr("class", "vizText")
              .style("fill", function(d, i){
                if(i===1){
                  return textColor;
                }
              })
              .attr("font-family", "Helvetica")
              .attr("transform", function(d) { return "translate(0,20)"; })
              .attr("dy", function(d, i){
                return i*20;
              })
              .attr("dx", function(d, i){
                if(i===1){
                  return 10;
                }
                else{
                  return 2;
                }
              })
              //.attr("font-size", d3.select(".wTextSize").node().value)
              .text(function(d){return d;});
        }
        else{
          n = clickedData[clickedData.length-1]
          cInd = childrenArray.indexOf(d.name)
          windowFields = ['Linked Gene: ', d.key,
                          'Reference Gene: ', n.key,
                          'Interactions: ' + d.weights.length,
                          'Score: ' + n.weights[cInd],
                          'Source: ' + n.datasource[cInd]];
          var linkedColor = d.color;
          var refColor = n.color;
          windowText.data(windowFields)
            .enter()
              .append("svg:text")
              .attr("class", "vizText")
              .style("fill", function(d, i){
                if(i === 1){
                  return linkedColor;
                }
                else if(i === 3){
                  return refColor;
                }
              })
              .attr("font-family", "Helvetica")
              .attr("transform", function(d) { return "translate(0,20)"; })
              .attr("dy", function(d, i){
                return i*20;
              })
              .attr("dx", function(d, i){
                return (i>3 || i % 2 ===0) ? 2 : 10;
              })
              //.attr("font-size", d3.select(".wTextSize").node().value)
              .text(function(d){return d;});
        }
      }

      /*function fixStrings(s, cut=18){
        if(s.length <= cut){
          return s;
        }
        else{
          var strings = []
          words = s.split(' ')
          vals = Math.floor(s.length/cut)
          b = 0;
          for(j=0; j<=vals; j++){
            a = b;
            for(i=a; i<=words.length; i++){
              test = words.slice(a, i+1).join(' ')
              if(test.length >= cut){
                b = i+1;
                break;
              }
            }
            if(j != vals){
              strings.push(words.slice(a, b).join(' '))
            }
            else{
              strings.push(words.slice(b).join(' '))
            }
          }
          return(strings)
        }
      }*/
    </script>
  </body>
</html>
